(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{100:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return l})),t.d(a,"metadata",(function(){return b})),t.d(a,"rightToc",(function(){return s})),t.d(a,"default",(function(){return i}));var n=t(1),r=t(6),c=(t(0),t(116)),l={id:"instalacionH",title:"Instalaci\xf3n de Zabbix 4.0",sidebar_label:"Instalaci\xf3n",hide_title:!1,hide_table_of_contents:!1,keywords:["Sistema de Monitoreo de Red","NMS","Universidad Francisco de Paula Santander","UFPS","Centro de Servicios de Informaci\xf3n","CSI","Zabbix"]},b={id:"instalacionH",title:"Instalaci\xf3n de Zabbix 4.0",description:"Antes de comenzar, se recomienda tener SELinux en modo permisivo. Ingrese el siguiente comando y presione la tecla **Enter** para abrir el archivo de configuraci\xf3n.",source:"@site/docs/instalacionZabbix.md",permalink:"/docs/instalacionH",editUrl:"https://github.com/LizethRE2/MonitoreoDocs/edit/master/docs/instalacionZabbix.md",sidebar_label:"Instalaci\xf3n",sidebar:"docs",previous:{title:"Introducci\xf3n",permalink:"/docs/zabbix"},next:{title:"Configuraci\xf3n de Zabbix 4.0",permalink:"/docs/configuracionH"}},s=[{value:"Instalar Requisitos Previos",id:"instalar-requisitos-previos",children:[{value:"Apache",id:"apache",children:[]},{value:"PHP",id:"php",children:[]},{value:"MariaDB",id:"mariadb",children:[]}]},{value:"Instalar de Zabbix",id:"instalar-de-zabbix",children:[{value:"Crear Base de Datos",id:"crear-base-de-datos",children:[]},{value:"Importar Base de Datos",id:"importar-base-de-datos",children:[]}]}],o={rightToc:s};function i(e){var a=e.components,t=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},o,t,{components:a,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Antes de comenzar, se recomienda tener SELinux en modo permisivo. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para abrir el archivo de configuraci\xf3n."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"nano /etc/selinux/config\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/centos10.png",alt:"alt text"}))),Object(c.b)("p",null,"L\xednea 7: cambie ",Object(c.b)("strong",{parentName:"p"},"enforcing")," a ",Object(c.b)("strong",{parentName:"p"},"permissive"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"SELINUX=permissive\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/centos10.1.png",alt:"alt text"})),"\nGuarde y cierre el archivo (",Object(c.b)("strong",{parentName:"p"},"Ctrl + o, Ctrl + x")," para el editor nano)."),Object(c.b)("p",null,"Para aplicar cambios, reinicie el servidor. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"reboot\n")),Object(c.b)("h2",{id:"instalar-requisitos-previos"},"Instalar Requisitos Previos"),Object(c.b)("h3",{id:"apache"},"Apache"),Object(c.b)("h4",{id:"instalar"},"Instalar"),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para instalar el servidor web Apache."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum -y install httpd\n")),Object(c.b)("h4",{id:"configurar"},"Configurar"),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para abrir el archivo de configuraci\xf3n."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"nano /etc/httpd/conf/httpd.conf\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix1.png",alt:"alt text"}))),Object(c.b)("p",null,"L\xednea 86: cambie la direcci\xf3n de correo electr\xf3nico del administrador."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"ServerAdmin xxxxx@xxxxx.com\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix1.1.png",alt:"alt text"}))),Object(c.b)("p",null,"L\xednea 95: cambie el nombre del servidor."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"ServerName xxxxx\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix1.2.png",alt:"alt text"}))),Object(c.b)("p",null,"A\xf1ada las siguientes l\xedneas al final del archivo."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"ServerSignature Off\nServerTokens Prod\nKeepAlive On\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix1.3.png",alt:"alt text"})),"\nGuarde y cierre el archivo (",Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Ctrl + o, Ctrl + x"))," para el editor nano)."),Object(c.b)("p",null,"Inicie, verifique y habilite Apache. Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl start httpd.service\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl status httpd.service\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl enable httpd.service\n")),Object(c.b)("p",null,"Si Firewalld se est\xe1 ejecutando, permita el acceso de Apache. Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"firewall-cmd --add-service=http --permanent\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"firewall-cmd --add-service=https --permanent\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"firewall-cmd --reload\n")),Object(c.b)("h3",{id:"php"},"PHP"),Object(c.b)("h4",{id:"instalar-1"},"Instalar"),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para instalar PHP y los paquetes requeridos para Zabbix."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum -y install php php-bcmath php-cli php-cgi php-common php-ctype php-devel php-gd php-gettext php-ldap php-mbstring php-mysql php-net-socket php-pear php-session php-snmp php-xml php-xmlwriter\n")),Object(c.b)("p",null,"Reinicie Apache. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl restart httpd.service\n")),Object(c.b)("h3",{id:"mariadb"},"MariaDB"),Object(c.b)("h4",{id:"instalar-2"},"Instalar"),Object(c.b)("p",null,"Para instalar MariaDB 10.4, se debe a\xf1adir el repositorio a CentOS. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para crear el archivo."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"nano /etc/yum.repos.d/MariaDB.repo\n")),Object(c.b)("p",null,"A\xf1ada las siguientes l\xedneas."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"[mariadb]\nname = MariaDB\nbaseurl = http://yum.mariadb.org/10.4/centos7-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix2.png",alt:"alt text"})),"\nGuarde y cierre el archivo (",Object(c.b)("strong",{parentName:"p"},Object(c.b)("em",{parentName:"strong"},"Ctrl + o, Ctrl + x"))," para el editor nano)."),Object(c.b)("p",null,"Limpie la cach\xe9 de \xedndice. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum makecache fast\n")),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para instalar el sistema de gesti\xf3n de base de datos."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum -y install MariaDB-server\n")),Object(c.b)("h4",{id:"configurar-1"},"Configurar"),Object(c.b)("p",null,"Inicie, verifique y habilite MariaDB. Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl start mariadb.service\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl status mariadb.service\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"systemctl enable mariadb.service\n")),Object(c.b)("p",null,"Si Firewalld se est\xe1 ejecutando, permita el acceso de MariaDB. Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"firewall-cmd --add-service=mysql --permanent\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"firewall-cmd --reload\n")),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para realizar las configuraciones iniciales de MariaDB."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"mysql_secure_installation\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix2.1.png",alt:"alt text"}))),Object(c.b)("p",null,"Presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para continuar.\n",Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix2.2.png",alt:"alt text"}))),Object(c.b)("p",null,"Ingrese ",Object(c.b)("strong",{parentName:"p"},"Y")," y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para actualizar la contrase\xf1a de MariaDB."),Object(c.b)("p",null,"Ingrese la nueva contrase\xf1a y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),". Despu\xe9s, ingrese nuevamente la contrase\xf1a para confirmar y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para continuar.\n",Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix2.3.png",alt:"alt text"}))),Object(c.b)("p",null,"Ingrese ",Object(c.b)("strong",{parentName:"p"},"Y")," y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para remover los usuarios an\xf3nimos."),Object(c.b)("p",null,"Ingrese ",Object(c.b)("strong",{parentName:"p"},"Y")," y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para deshabilitar el acceso remoto del usuario root."),Object(c.b)("p",null,"Ingrese ",Object(c.b)("strong",{parentName:"p"},"Y")," y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para remover la base de datos de prueba."),Object(c.b)("p",null,"Ingrese ",Object(c.b)("strong",{parentName:"p"},"Y")," y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para recargar las tablas de privilegios."),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix2.4.png",alt:"alt text"}))),Object(c.b)("h2",{id:"instalar-de-zabbix"},"Instalar de Zabbix"),Object(c.b)("p",null,"Hay cuatro formas de instalar zabbix:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Instalaci\xf3n desde paquetes de distribuci\xf3n"),Object(c.b)("li",{parentName:"ul"},"Instalaci\xf3n con archivo fuente"),Object(c.b)("li",{parentName:"ul"},"Instalaci\xf3n desde contenedores (Docker)"),Object(c.b)("li",{parentName:"ul"},"Instalaci\xf3n de Imagen Zabbix")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\ud83d\udccc Para uso en producci\xf3n, se recomienda instalar desde paquetes de distribuci\xf3n.  ")),Object(c.b)("p",null,"Para instalar Zabbix 4.0 desde paquetes de distribuci\xf3n, se debe instalar el repositorio. Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para a\xf1adir el repositorio."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"rpm -Uvh https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-2.el7.noarch.rpm\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum clean all\n")),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para instalar zabbix server, frontend, agente, get con soporte de MySQL."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"yum -y install zabbix-agent zabbix-get zabbix-server-mysql zabbix-web-mysql\n")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"\u26a0\ufe0f Antes de MariaDB v10.2.26, MariaDB no calcul\xf3 correctamente los tama\xf1os de fila mientras se ejecutaba DDL, por lo que se pod\xedan crear tablas inseguras, incluso con innodb_strict_mode = ON establecido. Los c\xe1lculos fueron corregidos por MDEV-19292.\nComo efecto secundario, algunas tablas que se pod\xedan crear o modificar en versiones anteriores, pueden ser rechazadas con el siguiente error:"),Object(c.b)("pre",{parentName:"blockquote"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"ERROR 1118 (42000): Row size too large (> 8126). Changing some columns to TEXT or BLOB may help. In current row format, BLOB prefix of 0 bytes is stored inline.\n")),Object(c.b)("p",{parentName:"blockquote"},"Para evitar este error, zabbix sugiere deshabilitar innodb_strict_mode antes de la creaci\xf3n de la base de datos.")),Object(c.b)("h3",{id:"crear-base-de-datos"},"Crear Base de Datos"),Object(c.b)("p",null,"Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para abrir la consola de MariaDB."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"mysql -u root -p\n")),Object(c.b)("p",null,"Ingrese la contrase\xf1a y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("p",null,"Deshabilite innodb_strict_mode."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"set global innodb_strict_mode='OFF';\n")),Object(c.b)("p",null,"Ingrese los siguientes comandos y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter")," para crear la base de datos de Zabbix."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"create database zabbix character set utf8 collate utf8_bin;\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"grant all privileges on zabbix.* to zabbix@localhost identified by 'xxxxx';\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"flush privileges;\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"quit;\n")),Object(c.b)("p",null,Object(c.b)("img",Object(n.a)({parentName:"p"},{src:"../img/zabbix3.png",alt:"alt text"}))),Object(c.b)("h3",{id:"importar-base-de-datos"},"Importar Base de Datos"),Object(c.b)("p",null,"Importe el esquema inicial. Ingrese el siguiente comando y presione la tecla ",Object(c.b)("strong",{parentName:"p"},"Enter"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-console"}),"zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -u zabbix -p zabbix\n")))}i.isMDXComponent=!0},116:function(e,a,t){"use strict";t.d(a,"a",(function(){return p})),t.d(a,"b",(function(){return d}));var n=t(0),r=t.n(n);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){c(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=r.a.createContext({}),i=function(e){var a=r.a.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):b({},a,{},e)),t},p=function(e){var a=i(e.components);return r.a.createElement(o.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return r.a.createElement(r.a.Fragment,{},a)}},u=Object(n.forwardRef)((function(e,a){var t=e.components,n=e.mdxType,c=e.originalType,l=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),p=i(t),u=n,d=p["".concat(l,".").concat(u)]||p[u]||m[u]||c;return t?r.a.createElement(d,b({ref:a},o,{components:t})):r.a.createElement(d,b({ref:a},o))}));function d(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var c=t.length,l=new Array(c);l[0]=u;var b={};for(var s in a)hasOwnProperty.call(a,s)&&(b[s]=a[s]);b.originalType=e,b.mdxType="string"==typeof e?e:n,l[1]=b;for(var o=2;o<c;o++)l[o]=t[o];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);